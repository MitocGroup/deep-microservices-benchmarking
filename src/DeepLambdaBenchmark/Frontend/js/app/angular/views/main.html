<div class="container-fluid">
    <form name="controls">
        <h1>Lambdas Benchmark</h1>

        <label>Loops:</label>
        <input ng-model="main.config.loops" type="number" name="loops" />

        <label>Interval(ms)</label>
        <input ng-model="main.config.interval" type="number" name="interval" />

        <label>
            <input type="radio" ng-model="main.config.gateway" value="{{ main.GATEWAY_LAMBDA }}">
            Lambda
        </label>
        <label>
            <input type="radio" ng-model="main.config.gateway" value="{{ main.GATEWAY_API }}">
            API Gateway
        </label>
    </form>

    <br />

    <span style="color: red" ng-bind="main.errorText" ng-show="main.errorText"> {{ main.errorText }} </span>

    <br />

    <div ng-repeat="resourceId in main.resources">
        <form name="form_{{ $index }}" ng-submit="main.catchSubmit(resourceId)">
            <label>{{ resourceId }}</label>
            <input ng-model="main.payloads[resourceId]" type="text" name="payload" />

            {{ resultSummary = main.getResultsSummary(resourceId);""}}
            <b ng-if="resultSummary !== null">
                (min:{{ resultSummary.min }}, max:{{ resultSummary.max }}, avg:{{ resultSummary.avg }})
            </b>
            <input type="submit" value="Start"/>
        </form>

        <br />
    </div>

    <br/>
    <p style="text-align: center" ng-bind="main.loadingText"></p>
    <br/>

    <div>
        <table ng-table="main.tableParams" class="table table-bordered table-striped" show-filter="false">
            <tr ng-repeat="request in $data">
                <td title="'Request #'" sortable="'index'">
                    {{ request.index }}
                </td>
                <td title="'Start time'" sortable="'start'">
                    {{ request.start| date:'HH:mm:ss.sss' }}
                </td>
                <td title="'Stop time'" sortable="'stop'">
                    {{ request.stop| date:'HH:mm:ss.sss' }}
                </td>
                <td title="'Duration (ms)'" sortable="'duration'">
                    {{ request.duration }}
                </td>
                <td title="'Details'">
                    <p ng-repeat="(actionName, durationMs) in request.internalDebug">
                        {{ actionName }} : {{ durationMs }}
                    </p>
                </td>
            </p>
        </table>
    </div>
</div>
